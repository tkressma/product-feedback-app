{"ast":null,"code":"import _slicedToArray from\"/home/tom/Desktop/product-feedback-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import styles from\"./UserCenter.module.css\";import{Link}from\"react-router-dom\";import{useLocation}from\"react-router-dom\";import{useMediaQuery}from\"react-responsive\";import decode from\"jwt-decode\";import LogoutButton from\"../../../UI/LogoutButton/LogoutButton\";import{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserCenter(){// Retrieve the user from localStorage\nvar _useState=useState(JSON.parse(localStorage.getItem(\"profile\"))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var location=useLocation();var dispatch=useDispatch();var isMobile=useMediaQuery({query:\"(max-width: 767px)\"});var logout=function logout(){dispatch({type:\"LOGOUT\"});};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;// If the token has expired (1hr), logout\nif(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem(\"profile\")));},[location]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.logo,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles[\"logo__text_container\"],children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.h1,children:\"Frontend Mentor\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.p,children:\"Feedback Board\"})]}),user?/*#__PURE__*/_jsxs(\"div\",{className:styles[\"logo__user_controls\"],children:[/*#__PURE__*/_jsxs(\"p\",{className:styles.p,children:[\"Welcome, \",user.result.givenName,\".\"]}),!isMobile&&/*#__PURE__*/_jsx(LogoutButton,{})]}):/*#__PURE__*/_jsx(Link,{to:\"/auth\",className:\"\".concat(styles.p,\" \").concat(styles[\"logo__login_link\"]),children:\"Login\"})]});}","map":{"version":3,"sources":["/home/tom/Desktop/product-feedback-app/client/src/components/Home/Header/UserCenter/UserCenter.js"],"names":["useState","useEffect","styles","Link","useLocation","useMediaQuery","decode","LogoutButton","useDispatch","UserCenter","JSON","parse","localStorage","getItem","user","setUser","location","dispatch","isMobile","query","logout","type","token","decodedToken","exp","Date","getTime","logo","h1","p","result","givenName"],"mappings":"mIAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,aAAT,KAA8B,kBAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,YAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uCAAzB,CACA,OAASC,WAAT,KAA4B,aAA5B,C,wFACA,cAAe,SAASC,CAAAA,UAAT,EAAsB,CACnC;AACA,cAAwBT,QAAQ,CAACU,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eACA,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,CAAAA,QAAQ,CAAGb,aAAa,CAAC,CAAEc,KAAK,CAAE,oBAAT,CAAD,CAA9B,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBH,QAAQ,CAAC,CAAEI,IAAI,CAAE,QAAR,CAAD,CAAR,CACD,CAFD,CAIApB,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,KAAK,CAAGR,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEQ,KAApB,CAEA;AACA,GAAIA,KAAJ,CAAW,CACT,GAAMC,CAAAA,YAAY,CAAGjB,MAAM,CAACgB,KAAD,CAA3B,CACA,GAAIC,YAAY,CAACC,GAAb,CAAmB,IAAnB,CAA0B,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAA9B,CAAoDN,MAAM,GAC3D,CAEDL,OAAO,CAACL,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAD,CAAP,CACD,CAVQ,CAUN,CAACG,QAAD,CAVM,CAAT,CAYA,mBACE,aAAK,SAAS,CAAEd,MAAM,CAACyB,IAAvB,wBACE,aAAK,SAAS,CAAEzB,MAAM,CAAC,sBAAD,CAAtB,wBACE,WAAI,SAAS,CAAEA,MAAM,CAAC0B,EAAtB,6BADF,cAEE,UAAG,SAAS,CAAE1B,MAAM,CAAC2B,CAArB,4BAFF,GADF,CAMGf,IAAI,cACH,aAAK,SAAS,CAAEZ,MAAM,CAAC,qBAAD,CAAtB,wBACE,WAAG,SAAS,CAAEA,MAAM,CAAC2B,CAArB,uBAAkCf,IAAI,CAACgB,MAAL,CAAYC,SAA9C,OADF,CAEG,CAACb,QAAD,eAAa,KAAC,YAAD,IAFhB,GADG,cAMH,KAAC,IAAD,EACE,EAAE,CAAC,OADL,CAEE,SAAS,WAAKhB,MAAM,CAAC2B,CAAZ,aAAiB3B,MAAM,CAAC,kBAAD,CAAvB,CAFX,mBAZJ,GADF,CAsBD","sourcesContent":["import { useState, useEffect } from \"react\";\nimport styles from \"./UserCenter.module.css\";\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom\";\nimport { useMediaQuery } from \"react-responsive\";\nimport decode from \"jwt-decode\";\nimport LogoutButton from \"../../../UI/LogoutButton/LogoutButton\";\nimport { useDispatch } from \"react-redux\";\nexport default function UserCenter() {\n  // Retrieve the user from localStorage\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"profile\")));\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const isMobile = useMediaQuery({ query: \"(max-width: 767px)\" });\n\n  const logout = () => {\n    dispatch({ type: \"LOGOUT\" });\n  };\n\n  useEffect(() => {\n    const token = user?.token;\n\n    // If the token has expired (1hr), logout\n    if (token) {\n      const decodedToken = decode(token);\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n    }\n\n    setUser(JSON.parse(localStorage.getItem(\"profile\")));\n  }, [location]);\n\n  return (\n    <div className={styles.logo}>\n      <div className={styles[\"logo__text_container\"]}>\n        <h1 className={styles.h1}>Frontend Mentor</h1>\n        <p className={styles.p}>Feedback Board</p>\n      </div>\n\n      {user ? (\n        <div className={styles[\"logo__user_controls\"]}>\n          <p className={styles.p}>Welcome, {user.result.givenName}.</p>\n          {!isMobile && <LogoutButton />}\n        </div>\n      ) : (\n        <Link\n          to=\"/auth\"\n          className={`${styles.p} ${styles[\"logo__login_link\"]}`}\n        >\n          Login\n        </Link>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}