{"ast":null,"code":"import _asyncToGenerator from\"/home/tom/Desktop/product-feedback-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/tom/Desktop/product-feedback-app/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/tom/Desktop/product-feedback-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/tom/Desktop/product-feedback-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/tom/Desktop/product-feedback-app/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import styles from\"./Auth.module.css\";import Form from\"../UI/Forms/Form/Form\";import Heading from\"../UI/Heading/Heading\";import FormTextInput from\"../UI/Forms/FormTextInput/FormTextInput\";import addIcon from\"../../assets/shared/icon-new-feedback.svg\";import Button from\"../UI/Button/Button\";import{GoogleLogin}from\"react-google-login\";import{useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{signin,signup}from\"../../actions/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=function Auth(){var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSignup=_useState2[0],setIsSignup=_useState2[1];var heading=isSignup?\"Create An Account\":\"Sign In\";var formChangeBtnText=isSignup?\"Already a user?\":\"Create An Account\";var formSubmitBtnText=isSignup?\"Create Account\":\"Sign In\";var _useState3=useState({firstName:\"\",lastName:\"\",username:\"\",email:\"\",password:\"\",confirmPassword:\"\"}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var handleSubmit=function handleSubmit(event){event.preventDefault();if(isSignup){dispatch(signup(formData,navigate));}else{dispatch(signin(formData,navigate));}};// Update the form data state based on what input field is being used\nvar handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.id,e.target.value)));};var googleSuccess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var result,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:result=res===null||res===void 0?void 0:res.profileObj;token=res===null||res===void 0?void 0:res.tokenId;try{dispatch({type:\"AUTH\",data:{result:result,token:token}});// Redirect to previous page\nnavigate(-1);}catch(error){console.log(error.message);}case 3:case\"end\":return _context.stop();}}},_callee);}));return function googleSuccess(_x){return _ref.apply(this,arguments);};}();var googleFailure=function googleFailure(){console.log(\"Google Sign In was unsuccessful. Try again later.\");};return/*#__PURE__*/_jsxs(Form,{icon:addIcon,children:[/*#__PURE__*/_jsx(Heading,{type:\"h1\",children:heading}),/*#__PURE__*/_jsxs(\"form\",{id:\"create-user\",children:[isSignup&&/*#__PURE__*/_jsxs(\"div\",{className:styles[\"fullname__container\"],children:[/*#__PURE__*/_jsx(\"div\",{className:styles[\"inputlabel__container\"],children:/*#__PURE__*/_jsx(FormTextInput,{inputId:\"firstName\",value:formData.firstName,labelHeading:\"First Name\",onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"inputlabel__container\"],children:/*#__PURE__*/_jsx(FormTextInput,{inputId:\"lastName\",value:formData.lastName,labelHeading:\"Last Name\",onChange:handleChange})})]}),isSignup&&/*#__PURE__*/_jsx(FormTextInput,{inputId:\"username\",value:formData.username,labelHeading:\"Username\",onChange:handleChange}),/*#__PURE__*/_jsx(FormTextInput,{inputId:\"email\",value:formData.email,labelHeading:\"Email Address\",onChange:handleChange}),/*#__PURE__*/_jsx(FormTextInput,{inputId:\"password\",value:formData.password,labelHeading:\"Password\",type:\"password\",labelCaption:isSignup&&\"Password must be at least 8 characters\",onChange:handleChange}),isSignup&&/*#__PURE__*/_jsx(FormTextInput,{inputId:\"confirmPassword\",value:formData.confirmPassword,labelHeading:\"Repeat Password\",type:\"password\",onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"button__container\"],children:[/*#__PURE__*/_jsx(Button,{btnStyle:\"violet\",text:formSubmitBtnText,form:\"create-user\",onClick:handleSubmit}),/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"362804978157-o8ctp5ppr0kdu9a42h90rv8asg3d1eu2.apps.googleusercontent.com\",render:function render(renderProps){return/*#__PURE__*/_jsx(Button,{btnStyle:\"blue\",text:\"Google Sign In\",onClick:renderProps.onClick,disabled:renderProps.disabled});},onSuccess:googleSuccess,onFailure:googleFailure,cookiePolicy:\"single_host_origin\"}),/*#__PURE__*/_jsx(Button,{btnStyle:\"transparent\",text:formChangeBtnText,onClick:function onClick(e){e.preventDefault();setIsSignup(!isSignup);}})]})]})]});};export default Auth;","map":{"version":3,"sources":["/home/tom/Desktop/product-feedback-app/client/src/components/Auth/Auth.js"],"names":["React","useState","styles","Form","Heading","FormTextInput","addIcon","Button","GoogleLogin","useDispatch","useNavigate","signin","signup","Auth","dispatch","navigate","isSignup","setIsSignup","heading","formChangeBtnText","formSubmitBtnText","firstName","lastName","username","email","password","confirmPassword","formData","setFormData","handleSubmit","event","preventDefault","handleChange","e","target","id","value","googleSuccess","res","result","profileObj","token","tokenId","type","data","error","console","log","message","googleFailure","renderProps","onClick","disabled"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport styles from \"./Auth.module.css\";\nimport Form from \"../UI/Forms/Form/Form\";\nimport Heading from \"../UI/Heading/Heading\";\nimport FormTextInput from \"../UI/Forms/FormTextInput/FormTextInput\";\nimport addIcon from \"../../assets/shared/icon-new-feedback.svg\";\nimport Button from \"../UI/Button/Button\";\nimport { GoogleLogin } from \"react-google-login\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { signin, signup } from \"../../actions/auth\";\n\nconst Auth = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [isSignup, setIsSignup] = useState(false);\n  const heading = isSignup ? \"Create An Account\" : \"Sign In\";\n  const formChangeBtnText = isSignup ? \"Already a user?\" : \"Create An Account\";\n  const formSubmitBtnText = isSignup ? \"Create Account\" : \"Sign In\";\n\n  const [formData, setFormData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  });\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    if (isSignup) {\n      dispatch(signup(formData, navigate));\n    } else {\n      dispatch(signin(formData, navigate));\n    }\n  };\n\n  // Update the form data state based on what input field is being used\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.id]: e.target.value });\n  };\n\n  const googleSuccess = async (res) => {\n    const result = res?.profileObj;\n    const token = res?.tokenId;\n\n    try {\n      dispatch({ type: \"AUTH\", data: { result, token } });\n      // Redirect to previous page\n      navigate(-1);\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n  const googleFailure = () => {\n    console.log(\"Google Sign In was unsuccessful. Try again later.\");\n  };\n\n  return (\n    <Form icon={addIcon}>\n      <Heading type=\"h1\">{heading}</Heading>\n\n      <form id=\"create-user\">\n        {isSignup && (\n          <div className={styles[\"fullname__container\"]}>\n            <div className={styles[\"inputlabel__container\"]}>\n              <FormTextInput\n                inputId=\"firstName\"\n                value={formData.firstName}\n                labelHeading=\"First Name\"\n                onChange={handleChange}\n              />\n            </div>\n\n            <div className={styles[\"inputlabel__container\"]}>\n              <FormTextInput\n                inputId=\"lastName\"\n                value={formData.lastName}\n                labelHeading=\"Last Name\"\n                onChange={handleChange}\n              />\n            </div>\n          </div>\n        )}\n\n        {isSignup && (\n          <FormTextInput\n            inputId=\"username\"\n            value={formData.username}\n            labelHeading=\"Username\"\n            onChange={handleChange}\n          />\n        )}\n\n        <FormTextInput\n          inputId=\"email\"\n          value={formData.email}\n          labelHeading=\"Email Address\"\n          onChange={handleChange}\n        />\n\n        <FormTextInput\n          inputId=\"password\"\n          value={formData.password}\n          labelHeading=\"Password\"\n          type=\"password\"\n          labelCaption={isSignup && \"Password must be at least 8 characters\"}\n          onChange={handleChange}\n        />\n        {isSignup && (\n          <FormTextInput\n            inputId=\"confirmPassword\"\n            value={formData.confirmPassword}\n            labelHeading=\"Repeat Password\"\n            type=\"password\"\n            onChange={handleChange}\n          />\n        )}\n\n        <div className={styles[\"button__container\"]}>\n          <Button\n            btnStyle=\"violet\"\n            text={formSubmitBtnText}\n            form=\"create-user\"\n            onClick={handleSubmit}\n          />\n\n          <GoogleLogin\n            clientId=\"362804978157-o8ctp5ppr0kdu9a42h90rv8asg3d1eu2.apps.googleusercontent.com\"\n            render={(renderProps) => (\n              <Button\n                btnStyle=\"blue\"\n                text=\"Google Sign In\"\n                onClick={renderProps.onClick}\n                disabled={renderProps.disabled}\n              />\n            )}\n            onSuccess={googleSuccess}\n            onFailure={googleFailure}\n            cookiePolicy=\"single_host_origin\"\n          />\n\n          <Button\n            btnStyle=\"transparent\"\n            text={formChangeBtnText}\n            onClick={(e) => {\n              e.preventDefault();\n              setIsSignup(!isSignup);\n            }}\n          />\n        </div>\n      </form>\n    </Form>\n  );\n};\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}