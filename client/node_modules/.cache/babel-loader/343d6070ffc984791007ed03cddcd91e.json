{"ast":null,"code":"import _asyncToGenerator from\"/home/tom/Desktop/product-feedback-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/tom/Desktop/product-feedback-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/tom/Desktop/product-feedback-app/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import{useParams}from\"react-router-dom\";import styles from\"./ReplyForm.module.css\";import Button from\"../../../UI/Button/Button\";import{replyToComment}from\"../../../../actions/suggestions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReplyForm=function ReplyForm(_ref){var replyUser=_ref.replyUser,parentCommentId=_ref.parentCommentId,closeForm=_ref.closeForm,updateReplies=_ref.updateReplies;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),reply=_useState2[0],setReply=_useState2[1];var dispatch=useDispatch();var user=JSON.parse(localStorage.getItem(\"profile\"));var _useParams=useParams(),id=_useParams.id;var handleReplyComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _user$result,_user$result2;var newReplies;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(id);_context.next=4;return dispatch(replyToComment({content:reply,user:{name:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name,username:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.username},replyingTo:replyUser},id,parentCommentId));case 4:newReplies=_context.sent;console.log(newReplies);updateReplies(newReplies);closeForm();case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleReplyComment(_x){return _ref2.apply(this,arguments);};}();var handleReplyChange=function handleReplyChange(e){setReply(e.target.value);};return/*#__PURE__*/_jsxs(\"form\",{id:\"add-reply\",className:styles.replyform,children:[/*#__PURE__*/_jsx(\"textarea\",{className:styles.replytext,placeholder:\"Replying to @\".concat(replyUser),onChange:handleReplyChange}),/*#__PURE__*/_jsx(Button,{btnStyle:\"violet\",form:\"add-reply\",onClick:handleReplyComment,text:\"Post Reply\"})]});};export default ReplyForm;","map":{"version":3,"sources":["/home/tom/Desktop/product-feedback-app/client/src/components/SuggestionPage/CommentSection/Replies/ReplyForm.js"],"names":["React","useState","useDispatch","useParams","styles","Button","replyToComment","ReplyForm","replyUser","parentCommentId","closeForm","updateReplies","reply","setReply","dispatch","user","JSON","parse","localStorage","getItem","id","handleReplyComment","e","preventDefault","console","log","content","name","result","username","replyingTo","newReplies","handleReplyChange","target","value","replyform","replytext"],"mappings":"4YAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,CACA,OAASC,cAAT,KAA+B,iCAA/B,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAKZ,IAJJC,CAAAA,SAII,MAJJA,SAII,CAHJC,eAGI,MAHJA,eAGI,CAFJC,SAEI,MAFJA,SAEI,CADJC,aACI,MADJA,aACI,CACJ,cAA0BV,QAAQ,CAAC,EAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAb,CACA,eAAehB,SAAS,EAAxB,CAAQiB,EAAR,YAAQA,EAAR,CAEA,GAAMC,CAAAA,kBAAkB,2FAAG,iBAAOC,CAAP,gKACzBA,CAAC,CAACC,cAAF,GAEAC,OAAO,CAACC,GAAR,CAAYL,EAAZ,EAHyB,sBAKAN,CAAAA,QAAQ,CAC/BR,cAAc,CACZ,CACEoB,OAAO,CAAEd,KADX,CAEEG,IAAI,CAAE,CACJY,IAAI,CAAEZ,IAAF,SAAEA,IAAF,+BAAEA,IAAI,CAAEa,MAAR,uCAAE,aAAcD,IADhB,CAEJE,QAAQ,CAAEd,IAAF,SAAEA,IAAF,gCAAEA,IAAI,CAAEa,MAAR,wCAAE,cAAcC,QAFpB,CAFR,CAMEC,UAAU,CAAEtB,SANd,CADY,CASZY,EATY,CAUZX,eAVY,CADiB,CALR,QAKnBsB,UALmB,eAoBzBP,OAAO,CAACC,GAAR,CAAYM,UAAZ,EAEApB,aAAa,CAACoB,UAAD,CAAb,CACArB,SAAS,GAvBgB,sDAAH,kBAAlBW,CAAAA,kBAAkB,6CAAxB,CA0BA,GAAMW,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACV,CAAD,CAAO,CAC/BT,QAAQ,CAACS,CAAC,CAACW,MAAF,CAASC,KAAV,CAAR,CACD,CAFD,CAGA,mBACE,cAAM,EAAE,CAAC,WAAT,CAAqB,SAAS,CAAE9B,MAAM,CAAC+B,SAAvC,wBACE,iBACE,SAAS,CAAE/B,MAAM,CAACgC,SADpB,CAEE,WAAW,wBAAkB5B,SAAlB,CAFb,CAGE,QAAQ,CAAEwB,iBAHZ,EADF,cAME,KAAC,MAAD,EACE,QAAQ,CAAC,QADX,CAEE,IAAI,CAAC,WAFP,CAGE,OAAO,CAAEX,kBAHX,CAIE,IAAI,CAAC,YAJP,EANF,GADF,CAeD,CAvDD,CAyDA,cAAed,CAAAA,SAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport styles from \"./ReplyForm.module.css\";\nimport Button from \"../../../UI/Button/Button\";\nimport { replyToComment } from \"../../../../actions/suggestions\";\n\nconst ReplyForm = ({\n  replyUser,\n  parentCommentId,\n  closeForm,\n  updateReplies,\n}) => {\n  const [reply, setReply] = useState(\"\");\n  const dispatch = useDispatch();\n  const user = JSON.parse(localStorage.getItem(\"profile\"));\n  const { id } = useParams();\n\n  const handleReplyComment = async (e) => {\n    e.preventDefault();\n\n    console.log(id);\n\n    const newReplies = await dispatch(\n      replyToComment(\n        {\n          content: reply,\n          user: {\n            name: user?.result?.name,\n            username: user?.result?.username,\n          },\n          replyingTo: replyUser,\n        },\n        id,\n        parentCommentId\n      )\n    );\n\n    console.log(newReplies);\n\n    updateReplies(newReplies);\n    closeForm();\n  };\n\n  const handleReplyChange = (e) => {\n    setReply(e.target.value);\n  };\n  return (\n    <form id=\"add-reply\" className={styles.replyform}>\n      <textarea\n        className={styles.replytext}\n        placeholder={`Replying to @${replyUser}`}\n        onChange={handleReplyChange}\n      ></textarea>\n      <Button\n        btnStyle=\"violet\"\n        form=\"add-reply\"\n        onClick={handleReplyComment}\n        text=\"Post Reply\"\n      />\n    </form>\n  );\n};\n\nexport default ReplyForm;\n"]},"metadata":{},"sourceType":"module"}